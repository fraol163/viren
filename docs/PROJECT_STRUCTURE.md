# Viren Project Structure

This document describes the organized directory layout of the Viren CLI application, following Go best practices.

## Directory Overview

```
viren/
├── cmd/              # Application entry points
│   └── viren/        # Main application
│       └── main.go   # Application entry point
├── internal/         # Private application code (not importable by other modules)
│   ├── chat/         # Chat session management
│   ├── config/       # Configuration handling and onboarding
│   ├── platform/     # AI platform integrations
│   ├── ui/           # Terminal UI components
│   └── util/         # Internal utilities
├── pkg/              # Public library code (importable by other modules)
│   └── types/        # Shared type definitions
├── bin/              # Compiled binaries
│   ├── .gitkeep      # Keeps directory in version control
│   ├── viren         # Main release binary
│   ├── main          # Development binary
│   └── viren_debug   # Debug binary
├── tools/            # Development and build tools
│   └── remove_comments_final.go  # Utility to strip comments from Go files
├── docs/             # Documentation
│   ├── examples/     # Usage examples
│   ├── PROJECT_STRUCTURE.md      # This file
│   ├── api_keys.md   # API key setup guide
│   ├── architecture.md           # System architecture
│   ├── changelog.md  # Version history
│   ├── cli_reference.md          # CLI command reference
│   ├── contributing.md           # Contribution guidelines
│   ├── customization.md          # Customization options
│   ├── privacy.md    # Privacy information
│   ├── roadmap.md    # Development roadmap
│   ├── troubleshooting.md        # Troubleshooting guide
│   └── user_guide.md # User documentation
├── image/            # Images and screenshots
│   └── *.png         # Project screenshots
├── .git/             # Git repository
├── .gitignore        # Git ignore rules
├── go.mod            # Go module definition
├── go.sum            # Go dependency checksums
├── Makefile          # Build automation
├── LICENSE           # License file
├── README.md         # Project readme
├── install.sh        # Installation script
├── package.json      # npm package configuration (for postinstall)
└── postinstall.js    # npm postinstall script
```

## Directory Descriptions

### `cmd/`
Contains application entry points. Following Go conventions, each subdirectory represents a separate executable. Viren has a single entry point:

- **`cmd/viren/main.go`** - The main application entry point containing the CLI logic, flag parsing, and application initialization.

### `internal/`
Contains private application code that should not be imported by external packages. This enforces encapsulation and prevents unintended API exposure.

- **`chat/`** - Chat session management including history, session save/restore, and message handling.
- **`config/`** - Configuration file handling, onboarding flow, and settings management.
- **`platform/`** - AI platform integrations (OpenAI, Groq, Ollama, etc.) and model selection.
- **`ui/`** - Terminal UI components including themes, loading animations, and display formatting.
- **`util/`** - Internal utility functions for file handling, temp directories, etc.

### `pkg/`
Contains public library code that can be imported by other Go modules. Currently minimal as Viren is primarily an application.

- **`types/`** - Shared type definitions used across packages (AppState, SessionFile, Message, etc.).

### `bin/`
Contains compiled binaries. This directory is generated by the build process.

- **`.gitkeep`** - Placeholder to keep the directory in version control when empty.
- **`viren`** - Main release binary (production build).
- **`main`** - Development binary.
- **`viren_debug`** - Debug binary with additional logging.

### `tools/`
Contains development and build tools that are not part of the main application but assist in development workflows.

- **`remove_comments_final.go`** - Utility to strip comments from Go source files (used for code minification/obfuscation).

### `docs/`
Contains project documentation.

- **`examples/`** - Usage examples and sample workflows.
- **`PROJECT_STRUCTURE.md`** - This document describing the project layout.
- **`api_keys.md`** - Guide for setting up API keys for various AI platforms.
- **`architecture.md`** - System architecture documentation.
- **`changelog.md`** - Version history and changes.
- **`cli_reference.md`** - Complete CLI command reference.
- **`contributing.md`** - Guidelines for contributing to the project.
- **`customization.md`** - Options for customizing Viren's behavior.
- **`privacy.md`** - Privacy policy and data handling information.
- **`roadmap.md`** - Future development plans.
- **`troubleshooting.md`** - Common issues and solutions.
- **`user_guide.md`** - Comprehensive user documentation.

### `image/`
Contains images and screenshots used in documentation.

## Build Structure

### Makefile Targets

| Target | Description |
|--------|-------------|
| `build` | Build the binary to `bin/viren` |
| `install` | Install to `$GOPATH/bin` |
| `clean` | Remove build artifacts |
| `test` | Run tests |
| `lint` | Run linter (requires golangci-lint) |
| `fmt` | Format code with gofmt |
| `vet` | Run go vet |
| `deps` | Download and tidy dependencies |
| `dev` | Build and run in development mode |
| `run` | Build and run with optional ARGS |
| `build-all` | Build for multiple platforms |
| `release` | Create release tarballs |

### Building

```bash
# Standard build
make build

# Build and run
make run

# Build with custom arguments
make run ARGS='--help'

# Clean and rebuild
make clean && make build

# Multi-platform build
make build-all
```

## Go Module

- **Module Path:** `github.com/fraol163/viren`
- **Go Version:** 1.24.1
- **Toolchain:** go1.24.5

## Import Conventions

```go
// Internal packages (private)
import "github.com/fraol163/viren/internal/chat"
import "github.com/fraol163/viren/internal/config"
import "github.com/fraol163/viren/internal/platform"
import "github.com/fraol163/viren/internal/ui"
import "github.com/fraol163/viren/internal/util"

// Public packages
import "github.com/fraol163/viren/pkg/types"
```

## File Organization Principles

1. **cmd/** - Only contains main packages (entry points)
2. **internal/** - Private code, not importable externally
3. **pkg/** - Public, reusable library code
4. **bin/** - Build output only (gitignored except .gitkeep)
5. **tools/** - Development utilities, not part of main application
6. **docs/** - All documentation
7. **Root** - Configuration files, build scripts, and project metadata
